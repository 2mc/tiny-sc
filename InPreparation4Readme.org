#+STARTUP: showall

{ LPF.ar(In.ar(\in.kr(0)), 2000) } =<> \comb;
\comb.asSynthTree.inputs;
b = { Out.ar(\out.kr(0), WhiteNoise.ar(0.1)) }.play;
b.set(\out, 16);
b.set(\out, 24);
a.set(\in, 24);

{ WhiteNoise.ar } => \source;

\source.asSynthTree.synth.set(\out, 15);
\comb =< \source;
SynthTree.initTree;

** TODO linking synth inputs-outputs

#+BEGIN_EXAMPLE
// Start an "effect" synth with an input
{ LPF.ar(In.ar(\in.kr(0)), \freq.kr(4000)) } =<> \lpf;
// Send another synth to the input of the effect synth
\lpf =< ({ WhiteNoise.ar } ==> \source);
\lpf.set(\freq, 10000);

{ CombN.ar(In.ar(\in.kr(0)), 0.5, 0.5) } =<> \comb;
\comb =< ({ WhiteNoise.ar(Decay.kr(Impulse.kr(1))) } ==> \noise);
{ WhiteNoise.ar(Decay.kr(Impulse.kr(1))) } ==> \noise;

{ CombN.ar(In.ar(\in.kr(0)), 0.1, 0.1) } =<> \comb;

c = \source.asSynthTree.synth;
c.set(\out, 16);

\comb.asSynthTree.isPlaying;
\comb.asSynthTree.synth;
\source.asSynthTree.isPlaying;
\source.asSynthTree.synth;
\comb.asSynthTree.start;
#+End_example

and again

#+BEGIN_EXAMPLE

// Start an "effect" synth with an input
{ LPF.ar(In.ar(\in.kr(0)), \freq.kr(2000)) } =<> \comb;


a = \comb.asSynthTree.synth;
c = \comb.asSynthTree;
c.inputs;
a.set(\out, 0);

b.moveToHead;

// Send another synth to the input of the effect synth
\comb =< ({ WhiteNoise.ar } ==> \source);
\comb.asSynthTree.isPlaying;
\comb.asSynthTree.synth;
\source.asSynthTree.isPlaying;
\source.asSynthTree.synth;
\comb.asSynthTree.start;

\comb.asSynthTree.synth.isPlaying;
\source.asSynthTree.synth.isPlaying;
\source.asSynthTree.synth.set(\out, 16);
\comb.asSynthTree.synth.set(\in, 16);
\comb.asSynthTree.free;

a = { LPF.ar(In.ar(\in.kr(0)), \freq.kr(2000)) }.xplay;

b = { WhiteNoise.ar }.xplay;

b.set(\out, 16);

a.set(\in, 16);



a.free;


a = { LPF.ar(In.ar(\in.kr(0)), 2000) }.xplay;

a = { In.ar(\in.kr(0)) }.xplay;

a.set(\in, 16);
a.free;

a.free;

\comb.asSynthTree.synth.set(\in, 16);
\comb.asSynthTree.synth.set(\out, 0);
#+END_EXAMPLE
